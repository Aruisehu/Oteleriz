<% content_for :main_nav do %>
    <h3 class="title">Click & Sit</h3>
    <%= link_to "Entrés", "#starter" %>
    <%= link_to "Plats", "#main" %>
    <%= link_to "Desserts", "#dessert" %>
    <%= link_to "Formules", "#course" %>
    <%= link_to "Boissons", "#drink" %>
<% end %>

<% content_for :main_action do %>
    <%= cell(:cart, @order).(:display) %>
<% end %>

<section>
    <div class="row">
        <a id="starter" class="anchor"></a>
        <h3 class="title align -center">Entrés</h3>
        <%= cell(:product, collection: @starters) %>
    </div>
</section>
<section class="-darker">
    <div class="row  align -center">
        <a id="main" class="anchor"></a>
        <h3 class="title">Plats</h3>
        <h4 class="subtitle">Créer votre plat à votre goût en choisissant vos aliments</h4>
            <a class="btn" href="<%= add_menu_to_order_path %>">Créer mon plat <%= fa_icon "plus" %></a>
            <a class="btn -alt" href="<%= add_menu_to_order_path(random: true) %>">Surprenez-moi <%= fa_icon "random" %></a>
        <div class="col-12">
            <div class="zone">
                <header>
                    <h5 class="title align -center">Base</h5>
                </header>
                <% @dishes.each do |d| %>
                    <div class="col-4 align -center">
                        <i class="icon"><%= inline_svg d.name_en.downcase + ".svg" %></i>
                        <h6 class="title -compact"><%= d.name %></h6>
                    </div>
                <% end %>
            </div>
            <div class="zone">
                <header>
                    <h5 class="title align -center">Méthodes de cuisson</h5>
                </header>
                <% @bakings.each do |b| %>
                    <div class="col-4 align -center">
                        <i class="icon"><%= inline_svg b.name_en.downcase + ".svg" %></i>
                        <h6 class="title -compact"><%= b.name %></h6>
                    </div>
                <% end %>
            </div>
            <div class="zone">
                <header>
                    <h5 class="title align -center">Garnitures</h5>
                </header>
                <div class="scroll-x -auto">
                    <table>
                        <thead>
                            <th></th>
                            <% @bakings.each do |b| %>
                                <th><%= b.name %></th>
                            <% end %>
                        </thead>
                        <tbody>
                            <tr>
                                <th>Garniture</th>
                                <% @bakings.each do |b| %>
                                    <td><%= b.ingredient %></td>
                                <% end %>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="zone">
                <header>
                    <h5 class="title align -center">Marinades</h5>
                </header>
                <div class="scroll-x -auto">
                    <table>
                        <thead>
                            <th></th>
                            <% @dishes.each do |d| %>
                                <th><%= d.name %></th>
                            <% end %>
                        </thead>
                        <tbody>
                            <% @bakings.each do |b| %>
                                <% unless b.marinades.blank? %>
                                    <tr>
                                        <th><%= b.name %></th>
                                        <% @dishes.each do |d| %>
                                            <td><%= @marinades.find_by(baking: b, dish: d).description %></td>
                                        <% end %>
                                    </tr>
                                <% end %>
                            <% end %>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="col-12 align -center">
                <a class="btn" href="<%= add_menu_to_order_path %>">Créer mon plat <%= fa_icon "plus" %></a>
                <a class="btn -alt" href="<%= add_menu_to_order_path(random: true) %>">Surprenez-moi <%= fa_icon "random" %></a>
            </div>
        </div>
    </div>
</section>
<section>
    <div class="row">
        <a id="dessert" class="anchor"></a>
        <h3 class="title align -center">Desserts</h3>
        <%= cell(:product, collection: @desserts) %>
    </div>
</section>
